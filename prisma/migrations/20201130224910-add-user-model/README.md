# Migration `20201130224910-add-user-model`

This migration has been generated by jackskim at 11/30/2020, 2:49:10 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "User" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "name" TEXT NOT NULL,
    "email" TEXT NOT NULL,
    "password" TEXT NOT NULL
)

PRAGMA foreign_keys=OFF;
CREATE TABLE "new_Link" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "description" TEXT NOT NULL,
    "url" TEXT NOT NULL,
    "postedById" INTEGER,

    FOREIGN KEY ("postedById") REFERENCES "User"("id") ON DELETE SET NULL ON UPDATE CASCADE
);
INSERT INTO "new_Link" ("id", "createdAt", "description", "url") SELECT "id", "createdAt", "description", "url" FROM "Link";
DROP TABLE "Link";
ALTER TABLE "new_Link" RENAME TO "Link";
PRAGMA foreign_key_check;
PRAGMA foreign_keys=ON

CREATE UNIQUE INDEX "User.email_unique" ON "User"("email")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201130031759-init..20201130224910-add-user-model
--- datamodel.dml
+++ datamodel.dml
@@ -1,21 +1,32 @@
 // Data source: Tells Prisma you'll be using SQLite for your db connection
 datasource db {
   provider = "sqlite"
-	url = "***"
+	url = "***"
 }
 // Generator: Indicates that you want to generate Prisma client
 generator client {
   provider = "prisma-client-js"
 }
-// Data model: Here we have written out our `Link` as a model
+// Data models: 
+// The `Link` model defines the structure of the Link database table that Prisma
+// will create
 model Link {
-  id          Int       @id @default(autoincrement())
-	createdAt   DateTime  @default(now())
-	description String
-	url         String
+  id           Int       @id @default(autoincrement())
+	createdAt    DateTime  @default(now())
+	description  String
+	url          String
+	postedBy     User?     @relation(fields: [postedById], references: [id])
+	postedById   Int?
 }
-// The `Link` model defines the structure of the Link database table that Prisma
-// will create
+model User {
+  id        Int       @id @default(autoincrement())
+	name      String
+	email     String    @unique
+  password  String
+	links     Link[]
+}
+
+
```


